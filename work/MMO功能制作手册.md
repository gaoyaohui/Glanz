#MMO项目功能制作规范#

本文档用于规范项目中各个岗位在游戏功能开发、版本编译，产品提交上线等项目业务活动中的各项行为与操作标准。在员工工作过程中，通过执行已形成标准化的操作，实现减少、降低因人为低级失误造成项目进度延误、上线事故的可能性。请每一位项目内员工进行参考。
总则：新的规则建立遵循发现问题，分析原因，制定改进规则，主管讨论，晨会发布，文本归档记录步骤。发布后规则正式生效

## Part1--游戏功能开发 ##

**Step1：策划案设计**

策划案的设计采用Word+Excel文档+Axure交互文档三个部分组成。

1. **Word文档**用于结构化拆解功能设计。便于程序与测试理解功能设计目的，清晰的拆分功能逻辑能够有效提升程序和测试后续的工作。确保功能制作完成后，策划验收不会出现功能缺失或者功能设计不符情况出现。
2. **Excel表**为功能对应的数值文件，以及功能所需求的美术资源需求汇总。 
3. 美术资源需求汇总配合**Axure交互文档**，能够给美术团队提供清晰的功能交互方式，资源制作数量需求，降低制作过程中遗漏美术资源的风险<sup>（1）</sup>，确保功能产出后，美术表现与策划设计高度吻合。Axure中控件样式、尺寸依据美术UI制作规范标准制定。确保程序依据策划案效果图做功能预制与实际设计相符<sup>（7）</sup>。
4. 策划案编写依据策划案模板
> SVN\KuiBa\Design\01.设计文档\00 文档模板\设计文档模板.docx

----

**Step2：组织功能会**

组织功能会需达成以下目的：

1. 程序、测试、美术等制作岗位，充分理解功能设计意图，功能组成，与整个游戏的关联。
1. 制作岗位站在自身专业角度，提升策划案的设计完成度，查缺补漏。（功能会后，若美术UI没有参加会议，则会后跟进策划与UI进行单独沟通，确保每一个功能参与角色都能够了解功能详情）
1. 制作岗位评估功能可实现性，可根据策划案拆分工作任务，明确工作量。有可复用的资源或程序功能模块也可以当场确认，缩短开发时间。在会议上需要明确，针对此功能的美术设计方案是否需要功能跟进策划、主美术二次确认后再进行具体资源制作工作。避免执行人员在不经过确认的情况下，完成了资源制作。但实际制作后不符合需求的情况发生。

---
**Step3:进度排期：**
  研发期内迭代周期。分三个模块拆分进度。
  1. 新功能的开发制作。流程顺序为：服务器程序开发；美术资源制作；测试用例编写；客户端程序开发；美术资源进入；策划配表进入；测试验证。
  2. 上期迭代的BUG修复：重点修复上期和本期迭代出现的S、A级BUG<sup> (2) </sup>，直至修复完毕为止。流程顺序为：程序修改BUG，提交测试验证。
  3. 过往迭代版本体验产生的功能优化项。优化项优先级由策划团队定义。优化项制定的标准为：确保达到**玩家对同类型产品体验的基本期望值**。优化项确认后，若存在大的功能改动或者重构，同样需要按照功能会流程完成任务的拆解。流程顺序为：策划提出需求，程序评估，开发；美术、策划资源进入；测试验证。所有优化功能禅道内名称命名为
*【XX工种】【XX功能-XX优化】具体优化项*

1. 所有禅道任务均需要在功能下达2天内添加截止日期。禅道截止任务必须按时修复，未经主管确认，不允许延期。罚：买水果
2. 各工种完成功能拆分后，PM/跟进策划需在0.5天内完成任务下达。
3. **因不仔细阅读功能文档造成的后续功能补充，整体功能工期不做延长**。
4. 禅道完成后，程序、美术任务跟进策划验证完毕后，指派给测试、美术主管。验证完毕后关闭。策划任务策划验证完毕后关闭。

---


**Step 4 功能制作**

### 服务器开发
规则待补充添加

### UI效果图制作
日常流程：功能会前，策划需要与UI制定具体的可实现的功能效果图以及UE方式。功能会前置<sup> (9) </sup>。功能会完成后，UI同步拆分功能效果图制作时间。

效果图制作原则为：

1. 符合UI绘制标准。
2. 效果图的框架、UE表现要投入大量精力设计，力求避免返工<sup> (8) </sup>。
3. 细枝末节的动效以及图标效果，可后期再设计返工

### 客户端开发 
日常流程：

1. 根据UI提供功能效果图进行预制，若没有效果图，则按照策划提供的效果图框架拼预制。
2. 编写功能代码
3. 与服务器联调，上传SVN
4. 进行客户端打包

细节规则：
a-客户端比对效果图拼接预制，同时，修改BUG或者优化功能时也需要比对效果图进行拼接<sup>4</sup>。确保修改前后位置保持不变

b-效果图的预制需要按照NGUI预制规范进行。

c-客户端提交资源进行自测。调试时修改excel表，要对应生成lua，完成全套表格修改<sup>5</sup>，上传SVN。

d-在完结功能时，需要及时进行SVN代码上传，以及客户端打包上传工序。<sup>6</sup>


----------


**Step 5：功能跟进**
功能跟进，为了确保功能制作进入后半程时，功能制作的方向，内容**依旧与策划设计相符**。为了确保目的达成，有以下几个关键活动。


1. 重点功能，在美术实现方案确认后，进入制作或外包前，**需要与跟进策划与主美术进行二次确认**。避免做出美术成品后，方案实现本身不符合策划需求<sup> (3) </sup>，造成美术成本浪费。
2. 制作各岗位主管完成任务拆分后，PM在禅道内进行任务的二次分类，将属于同一功能需求的任务放在同一需求下，确保功能需求分类下的完整性。同时配合功能跟进策划确认任务拆解的完整性。避免功能做完后才发现有任务的遗漏出现<sup>1</sup>。
3. 制作过程中，以功能制作为单位，跟进策划、资源策划与对应的程序、美术实现人员**拉RTX群及时沟通**。提升信息同步率。服务器完成、客户端开始、美术资源完成、策划配置完成、美术资源提交版本等关键信息需要及时在群内同步。降低美术资源漏提交，误覆盖等情况出现几率。
4. 功能完成后，加入功能自测流程，相关开发功能的程序和策划需要确保流程的完整性。
5. 需求变更（优化）与任务调整。功能需求的变更若出现在功能开发的后半段，需要进行二次三方会，评估变更目的与期望实现效果。
6. 客户端完成制作后，跟进策划需要进行功能验收。验收内容分为以下2个部分：a.功能是否依据策划案实现可用性验收。b.替换UI正式资源后美术效果验收。美术效果验收在客户端完成后，可先交付关诗雨进行UI预制校验。
7. 完成功能跟进，填写策划验收报告。




### 禅道完成标准 ###
1. 策划案设计通过主策划审核后点击完成，通过制作人验收后确认关闭。关闭后，可开启功能会。
2. 程序任务研发完毕上传SVN后点击完成。策划验收后指派至测试，验证通过关闭。
3. 美术资源类完成上传SVN后点击完成，策划验证后指派至主美，验证通过后关闭。
4. 测试用例编写完成，点击完成，主测试验证确认关闭。
5. 测试验证任务，编写测试报告上传SVN后，点击完成，主测试验证确认关闭。
6. 部门内部非功能任务，完成后点击完成，对应主管验证关闭。

---

## Part2--版本编译 ##


版本制作当前开发周期内，会分两次完成。第一次为Debug版本，制作出真机版本后用于策划验收与程序调试使用。第二次为Realease版本，用于全员体验，提交版本反馈意见。 两次版本之间应该有2-3天的时间延后。用于Debug过程中产生BUG修复和功能优化操作。部分功能甚至会设计到策划配置的修改以及美术效果的调整。

**Step1：Debug版本：**
版本制作过程中最容易出现的问题是：多个功能同时进入版本合并时，产生的代码覆盖，服务器逻辑冲突与缺失；策划与美术共用的美术资源提交时产生的资源冲突覆盖问题。

针对资源策划提交资源覆盖美术资源的问题，目前策划和美术共用的文件分两类。特效类和场景类。

策划控制-特效的时间、效果显示与美术-特效挂的位置共用一个文件。（特效）。避免覆盖的方法可以考虑特效文件内的效果时间与显示专门使用单独文件供策划配置，与美术控制的特效文件分开。彻底解决共用问题。

场景地图策划控制场景刷怪，入口，美术确认表现、位置，共用一个文件。场景当前的提交顺序为美术提供资源，策划从Art-resource文件内提取资源，将本地的修改资源更新到美术资源上，然后提交版本。


**Step2：Release版本：**

进入release版本后，版本基本功能趋于稳定，测试介入开始进行测试工作。建立标准的测试循环工作。包含以下几个步骤：

1. 单元测试：针对单一功能，使用黑盒测试方案，按照既定的测试用例执行，确保单一功能逻辑完整。在功能逻辑完整实现的基础上，添加中断和数据存储对应的通用测试工作。测试BUG，
2. 集成测试：单元测试完成后，会针对单一功能与其他功能关联的部分进行二次功能测试，确保功能与功能之间的逻辑完整实现，例如：背包系统与邮件系统，装备系统；生活系统与家族系统等。
3. 回归测试：当所有单元测试、集成测试产生的BUG已大部分被修复时，会启动最终的回归测试环节。确保之前的DEBUG过程导致的**原本没有问题**的功能，或者**原本已修复的BUG**再度出现。

以上循环，直到项目内没有严重BUG后，终止循环。

**备注：BUG修复原则：**

优先修复优先度高的BUG，严重等级高的BUG。

---

## Part3--产品提交上线 ##
**Step3：版本发布：**

**规则：**版本日只进修复BUG相关的内容提交SVN

测试通过的版本，打出正式的苹果ipa,安卓apk，服务器部署包。部署步骤如下：
![](http://i.imgur.com/C26a9aH.png)


---
# 附录备注
（1）2017-5-17 核对功能完成度时才发现功能【NPC战斗AI】从配置到怪物模型到动作、特效都没有完成，但是到版本日的时候才发现没有完成

（2）2017-5-24 功能完成后，需要花额外两周的时间来进行功能验收，BUG持续上升，没有时间进行修复

（3）2017-5-24 功能完成后，策划才发现美术制作的UI不符合自己的需求。

（4）2018-1-4 策划在二次回顾已做完功能后，返现预制界面的按钮位置与之前提交不同，查看SVN-log后发现，程序在修改BUG或者优化功能时随手调整了按钮位置

（5）2017-12-10 演示版本在一次版本更新后对话提示全部乱了，查后发现是配置文件ID更改了。程序更新了lua脚本，但是对应的excel表没有更新。策划在老的excel表上更新后同步更新lua，上传SVN，造成原先程序更新lua被覆盖，造成对话提示错误。

（6）测试打了一下午包，打包后程序检测后发现依然有未上传内容。反复进行了打包验证操作。后续又出现了2次服务器改动的情况。导致测试一下午既定任务目标没有完成。

（7）2018-1-30 程序在自己拼功能预制的时候，只是粗略看了效果图，实际在验收过程中会出现预制图与实际效果图相差较远情况。

（8）2018-1-30 功能制作出后，美术与策划并不满意UI制作效果，比方说UE方式，以及界面布局等，需要进行二次翻新。

（9）2018-2-1 核对寄售行的策划案时，美术反应情况是功能会上不会对具体的界面UE方式，功能会后需要花大量时间与策划讨论UE设计调整。但此时程序以及按照策划效果图示意开始拼UI，美术效果图再出来时，才发现美术效果图与策划案内原定效果图存在差异，造成程序功能浪费